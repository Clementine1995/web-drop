# 自定义错误页和访问设置

## 多错误指向一个页面

在/etc/nginx/conf.d/default.conf 是可以看到下面这句话的。

```()
error_page   500 502 503 504  /50x.html;
```

error_page指令用于自定义错误页面，500，502，503，504 这些就是HTTP中最常见的错误代码，/50.html 用于表示当发生上述指定的任意一个错误的时候，都是用网站根目录下的/50.html文件进行处理。

## 单独为错误置顶处理方式

有些时候是要把这些错误页面单独的表现出来，给用户更好的体验。所以就要为每个错误码设置不同的页面。设置方法如下：

```()
error_page 404  /404_error.html;
```

然后到网站目录下新建一个404_error.html 文件，并写入一些信息。

```(html)
<html>
<meta charset="UTF-8">
<body>
<h1>404页面没有找到!</h1>
</body>
</html>
```

然后重启我们的服务，再进行访问，你会发现404页面发生了变化。

## 把错误码换成一个地址

处理错误的时候，不仅可以只使用本服务器的资源，还可以使用外部的资源。比如我们将配置文件设置成这样。

```()
error_page  404 https://www.baidu.com;
```

## 简单实现访问控制

有时候我们的服务器只允许特定主机访问，比如内部OA系统，或者应用的管理后台系统，更或者是某些应用接口，这时候我们就需要控制一些IP访问，我们可以直接在location里进行配置。

可以直接在default.conf里进行配置。

```()
location / {
    deny   123.9.51.42/200; (表示42到200端口都不可以访问，也可以填all，表示所有都不可以访问)
    allow  45.76.202.231;
}
```

配置完成后，重启一下服务器就可以实现限制和允许访问了。